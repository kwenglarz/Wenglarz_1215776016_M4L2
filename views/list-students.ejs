<!DOCTYPE html>
<html>
 <head>
  <title>List Students</title>
 </head>

 <body> 
  <%- include('./partials/navbar') %>
  <h1>All Students</h1>

  <!-- This is where we'll display the submitted student data -->
  <!-- EJS allows us to use JavaScript in our HTML. Here, we loop over the 'students' array and create a new list item for each student -->
  <% if(typeof students != undefined) { %>
   <ul>
     <% students.forEach(function(student) { %>
       <li>
         <h3>Name: <%= student.name %></h3>
         <p>Email: <%= student.email %></p>
         <p>Age: <%= student.age %></p>
         <p>Courses:</p>
          <% student.courses.forEach(function(course) { %>
            <ul>
              <li>Name: <%= course.name %></li>
              <li>Grade: <%= course.grade %></li>
            </ul>
          <% }); %>
       </li>
     <% }); %>
   </ul>
 <% }; %>

 <% if(typeof message != 'undefined') { %>
    <p>Message: <%= message %></p>
 <% }; %>
 </body>
</html>